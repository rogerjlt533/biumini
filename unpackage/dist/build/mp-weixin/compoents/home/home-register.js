(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["compoents/home/home-register"],{1583:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;u(n("ac3a"));var o=u(n("3ea0")),i=(u(n("03e9")),n("feab")),r=n("26cb");function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){n.e("compoents/home/home-data").then(function(){return resolve(n("5167"))}.bind(null,n)).catch(n.oe)},f={name:"HomeRegister",components:{homeData:l},computed:c({},(0,r.mapState)({isLogin:"isLogin",userid:"userid"})),data:function(){return{srcleft:"../../../static/treehole/my/back.png",txUrl:"../../static/treehole/biu/touxiang.png",txCamare:"../../static/treehole/zhuce-xiangji.png",mapImg:"../../static/treehole/zhuce-dingwei.png",imgsize:46,model:{penName:""},pickerShow:!1,maxlength:10,rules:{penName:[{required:!0,message:"请输入笔名",trigger:"blur"}]},yearActionSheetShow:!1,yearList:[],tongxinList:[{text:"邮寄信件"},{text:"E-mail"},{text:"不限"}],sexList:[{text:"男"},{text:"女"},{text:"保密"}],sexMatchList:[{text:"男"},{text:"女"},{text:"不限"}],labelPosition:"left",labelPosition_top:"top",errorType:["toast"],btnLeftStyle:{border:"1rpx solid #AE9F82","background-color":"#FFFFFF",color:"#AE9F82 !important",width:"200rpx"},btnRightStyle:{border:"1rpx solid #AE9F82","background-color":"#AE9F82",color:"#FFFFFF !important",width:"200rpx"},customStyleTitle:{"font-size":"36rpx",color:"#363D50"},colorList:["#394052","#FFFFFF"],bgColorList:["#F5F5F5","#AE9F82"],fileList:[],fileTemp:"",fileUrl:"",limitType:["png","jpg","jpeg","webp","gif","image"],header:{token:e.getStorageSync("token")},action:o.default.apiUrl+"/upload",check:!1,agreement:!1,showpopup:!1,content:""}},onReady:function(){this.$refs.uForm.setRules(this.rules)},methods:{uploadSuccess:function(e,t,n,o){200===e.code&&(n[t].url=e.data.url,this.fileList=n,console.log("this.fileList::",this.fileList))},uploadRemove:function(e,t,n){this.fileList=t},submit:function(e){var t=this;t.check?t.model.penName?t.$refs.uForm.validate((function(n){if(n){console.log("验证通过");var o=["pen_name","nick","image","match_start_age","match_end_age"],i=t.model;i.method=o.join(","),i.nick=t.model.penName,i.image=t.fileUrl,i.startAge=0,i.endAge=60,i.source="hole",console.info("register:::",i),t.updateApi(i,e)}else console.log("验证失败")})):t.$u.toast("请输入笔名"):t.$u.toast("请勾选协议")},goBack:function(){e.navigateBack({})},handleClickXy:function(e){1===e?(this.content=i.AQ_CONTENT[2],this.showpopup=!0):2===e&&(this.content=i.AQ_CONTENT[1],this.showpopup=!0)},checkboxChange:function(e){this.agreement=e.value},yhxylook:function(){this.showpopup=!1},updateApi:function(t,n){var o=this,i="/my/update/info";o.$http.post(i,t).then((function(t){if(200===t.data.code){n?(o.$u.toast("注册成功，继续完善资料"),e.navigateTo({url:"../../pages/home/register"})):(o.$u.toast("注册成功"),e.reLaunch({url:"../../pages/forest/forest"}));var i=e.getStorageSync("token");o.$store.dispatch("setToken",i)}else 501===t.data.code?setTimeout((function(){e.hideLoading(),o.$store.dispatch("Logout")}),800):e.showToast({icon:"error",title:t.data.message,duration:3e3})})).catch((function(e){var t=e.message;o.$tip.error(t)})).finally((function(){}))},selectFile:function(){var t=this,n=null;n=new Promise((function(t,n){e.chooseImage({count:1,sourceType:["album","camera"],sizeType:["original","compressed"],success:t,fail:n})})),n.then((function(e){e.tempFiles.map((function(e,n){t.checkFileExt(e)&&(t.fileTemp=e.path)})),t.uploadFile()})).catch((function(e){console.info("error::",e)}))},uploadFile:function(){var t=this;this.fileTemp&&(e.showLoading({mask:!0,title:"图片上传中..."}),e.uploadFile({url:this.action,filePath:this.fileTemp,name:"file",header:this.header,success:function(n){e.hideLoading();var o=t.$u.test.jsonString(n.data)?JSON.parse(n.data):n.data;[200,201,204].includes(n.statusCode)?503===o.code?e.showToast({icon:"error",title:o.message,duration:3e3}):(console.info("上传成功::",o),t.fileUrl=o.data.url,t.txUrl=o.data.url):(t.$u.toast("上传失败，请重试"),t.fileUrl="")},fail:function(n){e.hideLoading(),t.$u.toast("上传失败，请重试"),t.fileUrl=""},complete:function(e){}}))},checkFileExt:function(e){var t=!1,n="",o=/.+\./;return n=e.path.replace(o,"").toLowerCase(),t=this.limitType.some((function(e){return e.toLowerCase()===n})),t||this.$u.toast("不允许选择".concat(n,"格式的文件")),t}}};t.default=f}).call(this,n("543d")["default"])},"404e":function(e,t,n){"use strict";n.r(t);var o=n("1583"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"6ce0":function(e,t,n){"use strict";var o=n("7969"),i=n.n(o);i.a},7969:function(e,t,n){},dadc:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var o={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"2122"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"ffb8"))},uForm:function(){return n.e("uview-ui/components/u-form/u-form").then(n.bind(null,"ab69"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"b773"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"7fd0"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"5352"))},uCheckbox:function(){return n.e("uview-ui/components/u-checkbox/u-checkbox").then(n.bind(null,"159e"))},uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"5c2c"))},uParse:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-parse/u-parse")]).then(n.bind(null,"c60b"))}},i=function(){var e=this,t=e.$createElement;e._self._c},r=[]},e835:function(e,t,n){"use strict";n.r(t);var o=n("dadc"),i=n("404e");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("6ce0");var u,a=n("f0c5"),c=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"0655307a",null,!1,o["a"],u);t["default"]=c.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'compoents/home/home-register-create-component',
    {
        'compoents/home/home-register-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("e835"))
        })
    },
    [['compoents/home/home-register-create-component']]
]);
