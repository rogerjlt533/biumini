(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/forest/write"],{"0d69":function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return c})),o.d(t,"a",(function(){return n}));var n={uNavbar:function(){return o.e("uview-ui/components/u-navbar/u-navbar").then(o.bind(null,"2122"))},uUpload:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-upload/u-upload")]).then(o.bind(null,"5045"))},uTag:function(){return o.e("uview-ui/components/u-tag/u-tag").then(o.bind(null,"8281"))},uSwitch:function(){return o.e("uview-ui/components/u-switch/u-switch").then(o.bind(null,"bdb0"))},uButton:function(){return o.e("uview-ui/components/u-button/u-button").then(o.bind(null,"5352"))},uPopup:function(){return o.e("uview-ui/components/u-popup/u-popup").then(o.bind(null,"5c2c"))}},i=function(){var e=this,t=e.$createElement;e._self._c},c=[]},"22f0":function(e,t,o){},"3f88":function(e,t,o){"use strict";o.r(t);var n=o("0d69"),i=o("dc6e");for(var c in i)"default"!==c&&function(e){o.d(t,e,(function(){return i[e]}))}(c);o("410b");var s,u=o("f0c5"),r=Object(u["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=r.exports},"410b":function(e,t,o){"use strict";var n=o("22f0"),i=o.n(n);i.a},"723f":function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(o("3ea0"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){u(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var r=function(){o.e("compoents/common/choose-moods").then(function(){return resolve(o("16df"))}.bind(null,o)).catch(o.oe)},a=function(){o.e("compoents/common/choose-label").then(function(){return resolve(o("a722"))}.bind(null,o)).catch(o.oe)},l={components:{ChooseMoods:r,ChooseLabel:a},data:function(){return{srcleft:"../../../static/treehole/my/back.png",imgsize:46,showpopup1:!1,moodsIdx:0,showpopup2:!1,customStyle:{color:"#666666","font-size":"30rpx"},functitle:[{name:"谁可以看",desc:"是否公开显示在林间"},{name:"显示笔名",desc:"是否在林间显示笔名"}],switchChecked1:!0,switchText1:["私 密 "," 公 开"],switchChecked2:!0,switchText2:["匿 名 "," 显 示"],header:{token:e.getStorageSync("token")},fileList:[],action:n.default.apiUrl+"/upload",btnLeftStyle:{border:"1rpx solid #AE9F82","background-color":"#FFFFFF",color:"#AE9F82 !important",width:"200rpx"},btnRightStyle:{border:"1rpx solid #AE9F82","background-color":"#AE9F82",color:"#FFFFFF !important",width:"200rpx"},customStyleTitle:{"font-size":"32rpx",color:"#363D50","font-weight":"bolder"},label:{tag:"请选择标签",checked:!1,url:"../../static/treehole/cike-biaoqian.png"},moods:{title:"此刻的心情",url:"../../static/treehole/cike-xinqing.png"},model:{content:""},enableBtn2:!1}},computed:{},created:function(){},onLoad:function(e){var t=this,o=e.params||e.payload;if(o){try{var n=JSON.parse(decodeURIComponent(o))}catch(i){n=JSON.parse(o)}console.info("onLoad:::",n),this.model.id=n.id,this.model.content=n.content,n.label_tag&&(this.label.tag=n.label_tag,this.label.checked=!0),n.mood_code&&(this.moods.title=n.mood_tag,this.moods.code=n.mood_code,this.moods.url=n.mood_emoj),this.switchChecked1=0!==n.is_private,this.switchChecked2=0!==n.nick_show,n.images.map((function(e){var o={url:e};t.fileList.push(o)}))}},methods:{cancelLabel:function(){this.label.tag="请选择标签",this.label.checked=!1,this.showpopup2=!1},closelabel:function(e){this.label.tag=e.tag,this.label.id=e.id,this.label.checked=!0,this.showpopup2=!1},closemoods:function(e){this.moodsIdx=e.idx,"cancel"===e.code?(this.moods.title="此刻的心情",this.moods.url="../../static/treehole/cike-xinqing.png",this.moods.code=""):(this.moods.title=e.title,this.moods.url=e.url,this.moods.code=e.code),this.showpopup1=!1},switchChange1:function(e){console.info("switchChange1::",e),this.switchChecked1=e,e||(this.switchChecked2=!1)},switchChange2:function(e){console.info("switchChange2::",e),this.switchChecked2=e},chooseLabel:function(){this.$refs.label.title=this.label.title,this.$refs.label.initData(),this.showpopup2=!0},chooseMoods:function(){this.$refs.moods.currIdx=this.moodsIdx,this.showpopup1=!0},submit:function(){var t=this,o=[];t.fileList.map((function(e){o.push(e.url)}));var n="/hole/note/create",i={content:t.model.content,isSelf:t.switchChecked1?1:0,nick:t.switchChecked2?1:0,label:t.label.checked?t.label.id:"",mood:t.moods.code,images:o.join(",")};if(i.images.indexOf("wxfile://")>-1)return t.$u.toast("图片正在上传，请稍后"),!1;t.model.id?(n="/hole/note/edit",i=s(s({},i),{},{method:"edit",id:t.model.id})):i=s(s({},i),{},{method:"create"}),console.info(n,i),e.showLoading({mask:!0,title:"正在提交"}),t.enableBtn2=!0,t.$http.post(n,i).then((function(o){e.hideLoading();var n=o.data;200===n.code?(t.$u.toast("发送成功"),setTimeout((function(){t.goBack()}),1e3)):501===n.code?setTimeout((function(){e.hideLoading(),t.$store.dispatch("Logout")}),800):(t.enableBtn2=!1,e.showToast({icon:"error",title:n.message,duration:3e3}))})).catch((function(o){e.hideLoading(),t.enableBtn2=!1;var n=o.message;t.$tip.error(n)}))},uploadSuccess:function(e,t,o,n){200===e.code&&(o[t].url=e.data.url,this.fileList=o,console.log("this.fileList::",this.fileList))},uploadError:function(e,t,o){},uploadRemove:function(e,t,o){this.fileList=t},cancel:function(){this.goBack()},goBack:function(){e.navigateBack({})},onEditorReady:function(){var t=this;e.createSelectorQuery().select("#editor").context((function(e){t.editorCtx=e.context})).exec()},getContents:function(){var e=this;this.editorCtx.getContents({success:function(t){e.model.content=t.html}})}}};t.default=l}).call(this,o("543d")["default"])},a8bc:function(e,t,o){"use strict";(function(e){o("66ba");n(o("66fd"));var t=n(o("3f88"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(t.default)}).call(this,o("543d")["createPage"])},dc6e:function(e,t,o){"use strict";o.r(t);var n=o("723f"),i=o.n(n);for(var c in n)"default"!==c&&function(e){o.d(t,e,(function(){return n[e]}))}(c);t["default"]=i.a}},[["a8bc","common/runtime","common/vendor"]]]);