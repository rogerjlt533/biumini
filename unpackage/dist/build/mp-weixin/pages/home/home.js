(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"086e":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("a34a")),i=s(n("bcfc")),u=n("26cb");function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o,i,u,s){try{var r=e[u](s),c=r.value}catch(a){return void n(a)}r.done?t(c):Promise.resolve(c).then(o,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var u=e.apply(t,n);function s(e){r(u,o,i,s,c,"next",e)}function c(e){r(u,o,i,s,c,"throw",e)}s(void 0)}))}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=e.getSystemInfoSync(),d=function(){n.e("compoents/home/home-list").then(function(){return resolve(n("a587"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("compoents/home/home-data").then(function(){return resolve(n("5167"))}.bind(null,n)).catch(n.oe)},m=function(){Promise.all([n.e("common/vendor"),n.e("compoents/home/home-userinfo")]).then(function(){return resolve(n("7313"))}.bind(null,n)).catch(n.oe)},p=function(){Promise.all([n.e("common/vendor"),n.e("compoents/home/biu-mingpian")]).then(function(){return resolve(n("8797"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("compoents/home/biu-info").then(function(){return resolve(n("cc19"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("compoents/home/home-login").then(function(){return resolve(n("5f94"))}.bind(null,n)).catch(n.oe)},y=function(){Promise.all([n.e("common/vendor"),n.e("compoents/home/home-register")]).then(function(){return resolve(n("e835"))}.bind(null,n)).catch(n.oe)},w={components:{homeList:d,homeData:g,HomeUserinfo:m,BiuMingpian:p,BiuInfo:v,HomeLogin:b,HomeRegister:y},computed:f({},(0,u.mapState)({isAuth:"isAuth",isLogin:"isLogin",userInfo:"userInfo"})),data:function(){return{txCamare:"../../static/treehole/zhuce-xiangji.png",switchChecked:!0,switchText:["已暂停","寻友中"],sticky:{enable:!0},srcleft:"../../../static/treehole/my/wd-top-left.png",imgsize:46,isInfoEdit:!1,guanzhuList:[],biuList:[],homedata:[{name:"信息",icon:"../../static/treehole/my/wd-xinxi.png",url:"usersetinfo"},{name:"关注",icon:"../../static/treehole/my/wd-guanzhu.png",url:"guanzhu"},{name:"笔友",icon:"../../static/treehole/my/wd-biu.png",url:"biyou"},{name:"设置",icon:"../../static/treehole/my/wd-shezhi.png",url:"setting"}],homelist:[{name:"评论开关",desc:"树洞评论功能开关",type:"switch",urls:"pinglun"},{name:"私信开关",desc:"站内私信功能开关",type:"switch",urls:"priMsgStatus"},{name:"订阅消息",desc:"订阅消息提示开关",type:"navigateTo",urls:"../../pages/user/subscribe"},{name:"意见建议",desc:"程序功能意见建议",type:"navigateTo",urls:"../../pages/user/userhelp"},{name:"关于我们",desc:"团队简介、联系我们",type:"navigateTo",urls:"../../pages/user/userabout"},{name:"安全提示",desc:"安全提示、服务条款、隐私政策",type:"navigateTo",urls:"../../pages/user/usersafe"},{name:"黑名单",desc:"加入黑名单用户无法查看您的信息",type:"navigateTo",urls:"../../pages/user/blacklist"}],currIdx:e.getStorageSync("msg_to"),height:44,statusBarHeight:h.statusBarHeight}},watch:{userInfo:function(e){this.switchChecked=1===this.userInfo.searchStatus},currIdx:function(t){if(1===t){var n=this,o="/user/collect/list";n.$http.post(o).then((function(t){var o=t.data;console.info("sunzt:guanzhuList:",o),200===o.code?n.guanzhuList=o.data:501===o.code&&(console.log("val 1"),setTimeout((function(){e.hideLoading(),n.$store.dispatch("Logout")}),800))})).catch((function(e){var t=e.message;n.$tip.error(t)})).finally((function(){}))}else if(2===t){var i=this,u="/user/friend/list";i.$http.post(u).then((function(t){var n=t.data;200===n.code?i.biuList=n.data:501===n.code&&(console.log("val 2"),setTimeout((function(){e.hideLoading(),i.$store.dispatch("Logout")}),800))})).catch((function(e){var t=e.message;i.$tip.error(t)})).finally((function(){}))}}},created:function(){i.default.getNoticeAuthList().then((function(t){var n=t.data;if(200===n.code){for(var o=[],i=0;i<n.data.length;i++)o.push(n.data[i].value);e.setStorageSync("_tempIds_",o),console.log(e.getStorageSync("_tempIds_"))}})).catch((function(e){})).finally((function(){}))},onShow:function(){this.currIdx=e.getStorageSync("msg_to"),this.reLoadBiuInfo()},onLoad:function(){console.info("isAuth::",this.isAuth),console.info("userInfo.isPenuser::",this.userInfo.isPenuser),this.height=this.height+this.statusBarHeight-1,this.switchChecked=1===this.userInfo.searchStatus},methods:f(f({},(0,u.mapActions)(["setUserinfo","setToken"])),{},{reLoadBiuInfo:function(){var e=this,t="/user/friend/list";e.$http.post(t).then((function(t){var n=t.data;200===n.code?e.biuList=n.data:501===n.code&&console.log("val 3")})).catch((function(t){var n=t.message;e.$tip.error(n)})).finally((function(){}))},wxlogin:function(){e.showLoading({mask:!0,title:"正在授权登录"});var t=this;e.login({provider:"weixin",success:function(n){var o={code:n.code};t.$http.post("/login/wechat/code",o).then((function(e){var n=e.data;200===n.code&&t.$store.dispatch("setToken",n.data.token)})).catch((function(e){var n="请求出现错误，请稍后再试";t.$u.toast(n)})).finally((function(){setTimeout((function(){e.hideLoading()}),1e3)}))},fail:function(e){console.log("login fail:",e)}}),t.$nextTick((function(){e.requestSubscribeMessage({tmplIds:e.getStorageSync("_tempIds_"),success:function(e){"requestSubscribeMessage:ok"===e.errMsg&&console.log("订阅成功")},fail:function(e){console.log("res: "+JSON.stringify(e)),console.log("订阅失败")}})}))},fixed:function(){},unfixed:function(){},shiftPage:function(t){this.currIdx=t,e.setStorageSync("msg_to",t)},switchEdit:function(){this.isInfoEdit=!0},clickSwitchChecked:function(){this.isAuth||(this.$tip.error("笔友信息未完善"),setTimeout((function(){e.navigateTo({url:"../home/register"})}),1e3))},switchChange:function(t){var n=this,o={type:"search",status:t?1:0};n.userInfo.searchStatus=o.status;var i="/my/update/status";n.$http.post(i,o).then((function(t){var o=t.data;200===o.code?n.$store.dispatch("setUserinfo",n.userInfo):501===o.code?setTimeout((function(){e.hideLoading(),n.$store.dispatch("Logout")}),800):console.info("res::",t)})).catch((function(e){var t=e.message;n.$tip.error(t)})).finally((function(){}))},zhuxiao:function(){var t=this;e.showModal({title:"帐户注销",content:"请谨慎选择，注销后数据将无法找回！！！",success:function(){var n=c(o.default.mark((function n(i){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i.confirm?(e.showLoading({mask:!0,title:"正在注销"}),setTimeout((function(){e.hideLoading(),t.$store.dispatch("Logoff")}),800)):i.cancel;case 1:case"end":return n.stop()}}),n)})));function i(e){return n.apply(this,arguments)}return i}()})},logout:function(){var t=this;e.showLoading({mask:!0,title:"正在退出"}),setTimeout((function(){e.hideLoading(),t.$store.dispatch("Logout")}),800)},toBiuPage:function(t){var n=t;n.communicate=t.communicateInfo.communicate,e.navigateTo({url:"../user/biu?params="+encodeURIComponent(JSON.stringify(n))})},toBiuPage1:function(t){var n=f(f({},t),{},{friend:t.id});e.navigateTo({url:"../user/biu?params="+encodeURIComponent(JSON.stringify(n))})},handleChangeTx:function(){e.navigateTo({url:"../../pages/user/editTx?params="+encodeURIComponent(JSON.stringify(this.userInfo))})},aboutus:function(){e.navigateTo({url:"../user/userabout"})},findfriend:function(){var t=f(f({},this.userInfo),{},{friend:this.userInfo.id,name:this.userInfo.penName});e.navigateTo({url:"../../pages/user/biu?params="+encodeURIComponent(JSON.stringify(t))})}})};t.default=w}).call(this,n("543d")["default"])},1062:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return o}));var o={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"2122"))},uSwitch:function(){return n.e("uview-ui/components/u-switch/u-switch").then(n.bind(null,"bdb0"))},uSticky:function(){return n.e("uview-ui/components/u-sticky/u-sticky").then(n.bind(null,"8564"))},uDivider:function(){return n.e("uview-ui/components/u-divider/u-divider").then(n.bind(null,"eb1c"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"5352"))}},i=function(){var e=this,t=e.$createElement;e._self._c},u=[]},1640:function(e,t,n){"use strict";n.r(t);var o=n("086e"),i=n.n(o);for(var u in o)"default"!==u&&function(e){n.d(t,e,(function(){return o[e]}))}(u);t["default"]=i.a},"79d4":function(e,t,n){"use strict";(function(e){n("66ba");o(n("66fd"));var t=o(n("d2a4"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},9047:function(e,t,n){},9955:function(e,t,n){"use strict";var o=n("9047"),i=n.n(o);i.a},d2a4:function(e,t,n){"use strict";n.r(t);var o=n("1062"),i=n("1640");for(var u in i)"default"!==u&&function(e){n.d(t,e,(function(){return i[e]}))}(u);n("9955");var s,r=n("f0c5"),c=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"caf0af4e",null,!1,o["a"],s);t["default"]=c.exports}},[["79d4","common/runtime","common/vendor"]]]);