(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/editTx"],{1451:function(t,e,n){"use strict";n.r(e);var o=n("cdba"),r=n("f1f1");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("9396");var a,c=n("f0c5"),u=Object(c["a"])(r["default"],o["b"],o["c"],!1,null,"15e10d19",null,!1,o["a"],a);e["default"]=u.exports},"536f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("26cb"),r=i(n("3ea0"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l={components:{},data:function(){return{srcleft:"../../../static/treehole/my/back.png",imgsize:46,btnLeftStyle:{border:"1rpx solid #AE9F82","background-color":"#FFFFFF",color:"#AE9F82 !important",width:"200rpx"},btnRightStyle:{border:"1rpx solid #AE9F82","background-color":"#AE9F82",color:"#FFFFFF !important",width:"200rpx"},model:{},txUrl:"",fileList:[],fileTemp:"",fileUrl:"",limitType:["png","jpg","jpeg","webp","gif","image"],header:{token:t.getStorageSync("token")},action:r.default.apiUrl+"/upload"}},created:function(){},onLoad:function(t){var e=t.params||t.payload;try{var n=JSON.parse(decodeURIComponent(e))}catch(o){n=JSON.parse(e)}this.model=n,this.txUrl=this.model.image},methods:c(c({},(0,o.mapActions)(["setUserinfo"])),{},{submit:function(){var e=this,n="/my/update/info",o={method:"image",image:e.txUrl};e.$http.post(n,o).then((function(n){501===n.data.code&&setTimeout((function(){t.hideLoading(),e.$store.dispatch("Logout")}),800),e.$u.toast("修改成功"),e.model.image=e.txUrl,e.$store.dispatch("setUserinfo",e.model),setTimeout((function(){t.navigateBack({})}),1500)})).catch((function(t){var n=t.message;e.$tip.error(n)})).finally((function(){e.goBack()}))},cancel:function(){this.goBack()},goBack:function(){t.navigateBack({})},selectFile:function(){var e=this,n=null;n=new Promise((function(e,n){t.chooseImage({count:1,sourceType:["album","camera"],sizeType:["original","compressed"],success:e,fail:n})})),n.then((function(t){t.tempFiles.map((function(t,n){e.checkFileExt(t)&&(e.fileTemp=t.path)})),e.uploadFile()})).catch((function(t){console.info("error::",t)}))},uploadFile:function(){var e=this;this.fileTemp&&(t.showLoading({mask:!0,title:"图片上传中..."}),t.uploadFile({url:this.action,filePath:this.fileTemp,name:"file",header:this.header,success:function(n){t.hideLoading();var o=e.$u.test.jsonString(n.data)?JSON.parse(n.data):n.data;[200,201,204].includes(n.statusCode)?503===o.code?t.showToast({icon:"error",title:o.message,duration:3e3}):(console.info("上传成功::",o),e.fileUrl=o.data.url,e.txUrl=o.data.url):(e.$u.toast("上传失败，请重试"),e.fileUrl="")},fail:function(n){t.hideLoading(),e.$u.toast("上传失败，请重试"),e.fileUrl=""},complete:function(t){}}))},checkFileExt:function(t){var e=!1,n="",o=/.+\./;return n=t.path.replace(o,"").toLowerCase(),e=this.limitType.some((function(t){return t.toLowerCase()===n})),e||this.$u.toast("不允许选择".concat(n,"格式的文件")),e}})};e.default=l}).call(this,n("543d")["default"])},9396:function(t,e,n){"use strict";var o=n("a0ad"),r=n.n(o);r.a},a0ad:function(t,e,n){},cdba:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"2122"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"5352"))}},r=function(){var t=this,e=t.$createElement;t._self._c},i=[]},f1f1:function(t,e,n){"use strict";n.r(e);var o=n("536f"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},f81a:function(t,e,n){"use strict";(function(t){n("66ba");o(n("66fd"));var e=o(n("1451"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])}},[["f81a","common/runtime","common/vendor"]]]);