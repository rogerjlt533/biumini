{"version":3,"sources":["webpack:///C:/workspace/zuosuo/shudong-master/uview-ui/components/u-upload/u-upload.vue?4b91","webpack:///C:/workspace/zuosuo/shudong-master/uview-ui/components/u-upload/u-upload.vue?d4c2","webpack:///C:/workspace/zuosuo/shudong-master/uview-ui/components/u-upload/u-upload.vue?2a33","webpack:///C:/workspace/zuosuo/shudong-master/uview-ui/components/u-upload/u-upload.vue?2f40","uni-app:///uview-ui/components/u-upload/u-upload.vue","webpack:///C:/workspace/zuosuo/shudong-master/uview-ui/components/u-upload/u-upload.vue?4a2f","webpack:///C:/workspace/zuosuo/shudong-master/uview-ui/components/u-upload/u-upload.vue?e818"],"names":[],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,EAEA,KAFA,CAEA;AACA;AACA;AACA,WALA;AAMA,SATA,MASA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBADA;AAEA,yBAFA;;;AAKA;AACA,wBADA;AAEA,uCAFA;AAGA,uBAHA;AAIA,+BAJA;AAKA,2BALA;AAMA;;AAEA;;AAEA;AACA;AACA,cADA,IACA,QADA;;AAGA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,2BADA;AAEA,iCAFA;AAGA,4BAHA;;AAKA;AACA,WARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA/BA;AAgCA;AACA;;AAEA;AACA,SApCA;AAqCA;AACA;AACA;AACA;AACA,SAzCA;;AA2CA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,KA5MA;AA6MA;AACA,eA9MA,uBA8MA,KA9MA,EA8MA,GA9MA,EA8MA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxNA;AAyNA;AACA,cA1NA,sBA0NA,KA1NA,EA0NA;AACA;AACA,mBADA;AAEA,6BAFA;AAGA;AACA,+BADA;;;AAIA,oFAJA;AAKA;AACA,kCANA,GAMA;AACA,gCADA,CANA;AAQA;AARA,0BASA,6DATA;AAUA;AACA;AACA;AACA,uBAHA,EAGA,KAHA,CAGA;AACA;AACA;AACA,uBANA,CAVA;AAiBA;AACA;AACA;AACA,qBAHA,MAGA;AACA;AACA;AACA,qBAvBA;;AAyBA;AACA,oDA1BA,4IAHA;;;;;AAkCA,KA7PA;AA8PA;AACA,qBA/PA,6BA+PA,KA/PA,EA+PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxQA;AAyQA;AACA,UA1QA,kBA0QA,KA1QA,EA0QA;AACA;AACA;AACA;AACA;AACA;AACA,KAhRA;AAiRA;AACA,kBAlRA,0BAkRA,GAlRA,EAkRA,KAlRA,EAkRA;AACA;AACA;AACA;AACA,oBADA;AAEA,oBAFA;AAGA;AACA;AACA,SALA;AAMA;AACA;AACA,2BADA;AAEA,wBAFA;;AAIA,SAXA;;AAaA,KAlSA;AAmSA;AACA,gBApSA,wBAoSA,IApSA,EAoSA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAHA;AAIA;AACA;AACA,KAzTA,EAxMA,E;;;;;;;;;;;;;ACxEA;AAAA;AAAA;AAAA;AAAsyC,CAAgB,isCAAG,EAAC,C;;;;;;;;;;;ACA1zC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uview-ui/components/u-upload/u-upload.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./u-upload.vue?vue&type=template&id=0d33af60&scoped=true&\"\nvar renderjs\nimport script from \"./u-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./u-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./u-upload.vue?vue&type=style&index=0&id=0d33af60&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d33af60\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uview-ui/components/u-upload/u-upload.vue\"\nexport default component.exports","export * from \"-!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=template&id=0d33af60&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uLineProgress: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-line-progress/u-line-progress\" */ \"@/uview-ui/components/u-line-progress/u-line-progress.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.showUploadList ? _vm.$u.addUnit(_vm.width) : null\n  var g1 = _vm.showUploadList ? _vm.$u.addUnit(_vm.height) : null\n  var g2 =\n    !_vm.disabled && _vm.maxCount > _vm.lists.length && !_vm.customBtn\n      ? _vm.$u.addUnit(_vm.width)\n      : null\n  var g3 =\n    !_vm.disabled && _vm.maxCount > _vm.lists.length && !_vm.customBtn\n      ? _vm.$u.addUnit(_vm.height)\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3\n      }\n    }\n  )\n\n  if (_vm.$scope.data.scopedSlotsCompiler === \"augmented\") {\n    _vm.$setScopedSlotsParams(\"file\", {\n      file: _vm.lists\n    })\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"u-upload\" v-if=\"!disabled\">\n    <view v-if=\"showUploadList\" class=\"u-list-item u-preview-wrap\" v-for=\"(item, index) in lists\" :key=\"index\" :style=\"{\n\t\t\t\twidth: $u.addUnit(width),\n\t\t\t\theight: $u.addUnit(height)\n\t\t\t}\">\n      <view v-if=\"deletable\" class=\"u-delete-icon\" @tap.stop=\"deleteItem(index)\" :style=\"{\n\t\t\t\t\tbackground: delBgColor\n\t\t\t\t}\">\n        <u-icon class=\"u-icon\" :name=\"delIcon\" size=\"20\" :color=\"delColor\"></u-icon>\n      </view>\n      <u-line-progress v-if=\"showProgress && item.progress > 0 && !item.error\" :show-percent=\"false\" height=\"8\"\n        class=\"u-progress\" :percent=\"item.progress\"></u-line-progress>\n      <view @tap.stop=\"retry(index)\" v-if=\"item.error\" class=\"u-error-btn\">点击重试</view>\n      <image @tap.stop=\"doPreviewImage(item.url || item.path, index)\" class=\"u-preview-image\" v-if=\"!item.isImage\"\n        :src=\"item.url || item.path\" :mode=\"imageMode\"></image>\n    </view>\n    <slot name=\"file\" :file=\"lists\"></slot>\n    <view style=\"display: inline-block;\" @tap=\"selectFile\" v-if=\"maxCount > lists.length\">\n      <slot name=\"addBtn\"></slot>\n      <view v-if=\"!customBtn\" class=\"u-list-item u-add-wrap\" hover-class=\"u-add-wrap__hover\" hover-stay-time=\"150\"\n        :style=\"{\n\t\t\t\t\twidth: $u.addUnit(width),\n\t\t\t\t\theight: $u.addUnit(height)\n\t\t\t\t}\">\n        <u-icon name=\"plus\" class=\"u-add-btn\" size=\"40\"></u-icon>\n        <view class=\"u-add-tips\">{{ uploadText }}</view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\n  /**\n   * upload 图片上传\n   * @description 该组件用于上传图片场景\n   * @tutorial https://www.uviewui.com/components/upload.html\n   * @property {String} action 服务器上传地址\n   * @property {String Number} max-count 最大选择图片的数量（默认99）\n   * @property {Boolean} custom-btn 如果需要自定义选择图片的按钮，设置为true（默认false）\n   * @property {Boolean} show-progress 是否显示进度条（默认true）\n   * @property {Boolean} disabled 是否启用(显示/移仓)组件（默认false）\n   * @property {String} image-mode 预览图片等显示模式，可选值为uni的image的mode属性值（默认aspectFill）\n   * @property {String} del-icon 右上角删除图标名称，只能为uView内置图标\n   * @property {String} del-bg-color 右上角关闭按钮的背景颜色\n   * @property {String | Number} index 在各个回调事件中的最后一个参数返回，用于区别是哪一个组件的事件\n   * @property {String} del-color 右上角关闭按钮图标的颜色\n   * @property {Object} header 上传携带的头信息，对象形式\n   * @property {Object} form-data 上传额外携带的参数\n   * @property {String} name 上传文件的字段名，供后端获取使用（默认file）\n   * @property {Array<String>} size-type original 原图，compressed 压缩图，默认二者都有（默认['original', 'compressed']）\n   * @property {Array<String>} source-type 选择图片的来源，album-从相册选图，camera-使用相机，默认二者都有（默认['album', 'camera']）\n   * @property {Boolean} preview-full-image\t是否可以通过uni.previewImage预览已选择的图片（默认true）\n   * @property {Boolean} multiple\t是否开启图片多选，部分安卓机型不支持（默认true）\n   * @property {Boolean} deletable 是否显示删除图片的按钮（默认true）\n   * @property {String Number} max-size 选择单个文件的最大大小，单位B(byte)，默认不限制（默认Number.MAX_VALUE）\n   * @property {Array<Object>} file-list 默认显示的图片列表，数组元素为对象，必须提供url属性\n   * @property {Boolean} upload-text 选择图片按钮的提示文字（默认“选择图片”）\n   * @property {Boolean} auto-upload 选择完图片是否自动上传，见上方说明（默认true）\n   * @property {Boolean} show-tips 特殊情况下是否自动提示toast，见上方说明（默认true）\n   * @property {Boolean} show-upload-list 是否显示组件内部的图片预览（默认true）\n   * @event {Function} on-oversize 图片大小超出最大允许大小\n   * @event {Function} on-preview 全屏预览图片时触发\n   * @event {Function} on-remove 移除图片时触发\n   * @event {Function} on-success 图片上传成功时触发\n   * @event {Function} on-change 图片上传后，无论成功或者失败都会触发\n   * @event {Function} on-error 图片上传失败时触发\n   * @event {Function} on-progress 图片上传过程中的进度变化过程触发\n   * @event {Function} on-uploaded 所有图片上传完毕触发\n   * @event {Function} on-choose-complete 每次选择图片后触发，只是让外部可以得知每次选择后，内部的文件列表\n   * @example <u-upload :action=\"action\" :file-list=\"fileList\" ></u-upload>\n   */\n  export default {\n    name: 'u-upload',\n    props: {\n      //是否显示组件自带的图片预览功能\n      showUploadList: {\n        type: Boolean,\n        default: true\n      },\n      // 后端地址\n      action: {\n        type: String,\n        default: ''\n      },\n      // 最大上传数量\n      maxCount: {\n        type: [String, Number],\n        default: 52\n      },\n      //  是否显示进度条\n      showProgress: {\n        type: Boolean,\n        default: true\n      },\n      // 是否启用\n      disabled: {\n        type: Boolean,\n        default: false\n      },\n      // 预览上传的图片时的裁剪模式，和image组件mode属性一致\n      imageMode: {\n        type: String,\n        default: 'aspectFill'\n      },\n      // 头部信息\n      header: {\n        type: Object,\n        default () {\n          return {};\n        }\n      },\n      // 额外携带的参数\n      formData: {\n        type: Object,\n        default () {\n          return {};\n        }\n      },\n      // 上传的文件字段名\n      name: {\n        type: String,\n        default: 'file'\n      },\n      // 所选的图片的尺寸, 可选值为original compressed\n      sizeType: {\n        type: Array,\n        default () {\n          return ['original', 'compressed'];\n        }\n      },\n      sourceType: {\n        type: Array,\n        default () {\n          return ['album', 'camera'];\n        }\n      },\n      // 是否在点击预览图后展示全屏图片预览\n      previewFullImage: {\n        type: Boolean,\n        default: true\n      },\n      // 是否开启图片多选，部分安卓机型不支持\n      multiple: {\n        type: Boolean,\n        default: true\n      },\n      // 是否展示删除按钮\n      deletable: {\n        type: Boolean,\n        default: true\n      },\n      // 文件大小限制，单位为byte\n      maxSize: {\n        type: [String, Number],\n        default: Number.MAX_VALUE\n      },\n      // 显示已上传的文件列表\n      fileList: {\n        type: Array,\n        default () {\n          return [];\n        }\n      },\n      // 上传区域的提示文字\n      uploadText: {\n        type: String,\n        default: '选择图片'\n      },\n      // 是否自动上传\n      autoUpload: {\n        type: Boolean,\n        default: true\n      },\n      // 是否显示toast消息提示\n      showTips: {\n        type: Boolean,\n        default: true\n      },\n      // 是否通过slot自定义传入选择图标的按钮\n      customBtn: {\n        type: Boolean,\n        default: false\n      },\n      // 内部预览图片区域和选择图片按钮的区域宽度\n      width: {\n        type: [String, Number],\n        default: 200\n      },\n      // 内部预览图片区域和选择图片按钮的区域高度\n      height: {\n        type: [String, Number],\n        default: 200\n      },\n      // 右上角关闭按钮的背景颜色 //'#fa3534'\n      delBgColor: {\n        type: String,\n        default: \"#AE9F82\"\n      },\n      // 右上角关闭按钮的叉号图标的颜色\n      delColor: {\n        type: String,\n        default: '#ffffff'\n      },\n      // 右上角删除图标名称，只能为uView内置图标\n      delIcon: {\n        type: String,\n        default: 'close'\n      },\n      // 如果上传后的返回值为json字符串，是否自动转json\n      toJson: {\n        type: Boolean,\n        default: true\n      },\n      // 上传前的钩子，每个文件上传前都会执行\n      beforeUpload: {\n        type: Function,\n        default: null\n      },\n      // 移除文件前的钩子\n      beforeRemove: {\n        type: Function,\n        default: null\n      },\n      // 允许上传的图片后缀\n      limitType: {\n        type: Array,\n        default () {\n          // 支付宝小程序真机选择图片的后缀为\"image\"\n          // https://opendocs.alipay.com/mini/api/media-image\n          return ['png', 'jpg', 'jpeg', 'webp', 'gif', 'image'];\n        }\n      },\n      // 在各个回调事件中的最后一个参数返回，用于区别是哪一个组件的事件\n      index: {\n        type: [Number, String],\n        default: ''\n      }\n    },\n    mounted() {},\n    data() {\n      return {\n        lists: [],\n        isInCount: true,\n        uploading: false\n      };\n    },\n    watch: {\n      fileList: {\n        immediate: true,\n        handler(val) {\n          val.map(value => {\n            // 首先检查内部是否已经添加过这张图片，因为外部绑定了一个对象给fileList的话(对象引用)，进行修改外部fileList\n            // 时，会触发watch，导致重新把原来的图片再次添加到this.lists\n            // 数组的some方法意思是，只要数组元素有任意一个元素条件符合，就返回true，而另一个数组的every方法的意思是数组所有元素都符合条件才返回true\n            let tmp = this.lists.some(val => {\n                return val.url == value.url;\n              });\n              // 如果内部没有这个图片(tmp为false)，则添加到内部\n              !tmp && this.lists.push({\n                url: value.url,\n                error: false,\n                progress: 100\n              });\n          });\n        }\n      },\n      // 监听lists的变化，发出事件\n      lists(n) {\n        this.$emit('on-list-change', n, this.index);\n      }\n    },\n    methods: {\n      // 清除列表\n      clear() {\n        this.lists = [];\n      },\n      // 重新上传队列中上传失败的所有文件\n      reUpload() {\n        this.uploadFile();\n      },\n      // 选择图片\n      selectFile() {\n        if (this.disabled) return;\n        const {\n          name = '', maxCount, multiple, maxSize, sizeType, lists, camera, compressed, maxDuration, sourceType\n        } = this;\n        let chooseFile = null;\n        const newMaxCount = maxCount - lists.length;\n        // 设置为只选择图片的时候使用 chooseImage 来实现\n        chooseFile = new Promise((resolve, reject) => {\n          uni.chooseImage({\n            count: multiple ? (newMaxCount > 9 ? 9 : newMaxCount) : 1,\n            sourceType: sourceType,\n            sizeType,\n            success: resolve,\n            fail: reject\n          });\n        });\n        chooseFile.then(res => {\n            let file = null;\n            let listOldLength = this.lists.length;\n            res.tempFiles.map((val, index) => {\n              // 检查文件后缀是否允许，如果不在this.limitType内，就会返回false\n              if (!this.checkFileExt(val)) return;\n\n              // 如果是非多选，index大于等于1或者超出最大限制数量时，不处理\n              if (!multiple && index >= 1) return;\n              if (val.size > maxSize) {\n                this.$emit('on-oversize', val, this.lists, this.index);\n                this.showToast('超出允许的文件大小');\n              } else {\n                if (maxCount <= lists.length) {\n                  this.$emit('on-exceed', val, this.lists, this.index);\n                  this.showToast('超出最大允许的文件个数');\n                  return;\n                }\n                lists.push({\n                  url: val.path,\n                  progress: 0,\n                  error: false,\n                  file: val\n                });\n              }\n            });\n            // 每次图片选择完，抛出一个事件，并将当前内部选择的图片数组抛出去\n            this.$emit('on-choose-complete', this.lists, this.index);\n            if (this.autoUpload) this.uploadFile(listOldLength);\n          })\n          .catch(error => {\n            this.$emit('on-choose-fail', error);\n          });\n      },\n      // 提示用户消息\n      showToast(message, force = false) {\n        if (this.showTips || force) {\n          uni.showToast({\n            title: message,\n            icon: 'none'\n          });\n        }\n      },\n      // 该方法供用户通过ref调用，手动上传\n      upload() {\n        this.uploadFile();\n      },\n      // 对失败的图片重新上传\n      retry(index) {\n        this.lists[index].progress = 0;\n        this.lists[index].error = false;\n        this.lists[index].response = null;\n        uni.showLoading({\n          mask: true,\n          title: '重新上传'\n        });\n        this.uploadFile(index);\n      },\n      // 上传图片\n      // async uploadFile(index = 0) {//SUNZT//标记\n      uploadFile(index = 0) {\n        // uni.showLoading({\n        // \ttitle: \"图片上传中...\"\n        // });\n        if (this.disabled) {\n          // uni.hideLoading()\n          return;\n        }\n        if (this.uploading) {\n          // uni.hideLoading()\n          return;\n        }\n        // 全部上传完成\n        if (index >= this.lists.length) {\n          this.$emit('on-uploaded', this.lists, this.index);\n          // uni.hideLoading()\n          return;\n        }\n        // 检查是否是已上传或者正在上传中\n        if (this.lists[index].progress == 100) {\n          if (this.autoUpload == false) this.uploadFile(index + 1);\n          // uni.hideLoading()\n          return;\n        }\n        // 执行before-upload钩子\n        if (this.beforeUpload && typeof(this.beforeUpload) === 'function') {\n          // 执行回调，同时传入索引和文件列表当作参数\n          // 在微信，支付宝等环境(H5正常)，会导致父组件定义的customBack()函数体中的this变成子组件的this\n          // 通过bind()方法，绑定父组件的this，让this.customBack()的this为父组件的上下文\n          // 因为upload组件可能会被嵌套在其他组件内，比如u-form，这时this.$parent其实为u-form的this，\n          // 非页面的this，所以这里需要往上历遍，一直寻找到最顶端的$parent，这里用了this.$u.$parent.call(this)\n          // 明白意思即可，无需纠结this.$u.$parent.call(this)的细节\n          let beforeResponse = this.beforeUpload.bind(this.$u.$parent.call(this))(index, this.lists);\n          // 判断是否返回了promise\n          if (!!beforeResponse && typeof beforeResponse.then === 'function') {\n            //SUNZT//标记\n            // await beforeResponse.then(res => {\n            beforeResponse.then(res => {\n              // promise返回成功，不进行动作，继续上传\n            }).catch(err => {\n              // 进入catch回调的话，继续下一张\n              return this.uploadFile(index + 1);\n            })\n          } else if (beforeResponse === false) {\n            // 如果返回false，继续下一张图片的上传\n            return this.uploadFile(index + 1);\n          } else {\n            // 此处为返回\"true\"的情形，这里不写代码，就跳过此处，继续执行当前的上传逻辑\n          }\n        }\n        // 检查上传地址\n        if (!this.action) {\n          this.showToast('请配置上传地址', true);\n          return;\n        }\n        this.lists[index].error = false;\n        this.uploading = true;\n        // 创建上传对象 \n        console.info(\"uploadFile:name:\", this.name);\n        console.info(\"uploadFile:lists[index].url:\", this.lists[index].url);\n        console.info(\"uploadFile:action:\", this.action);\n        console.info(\"uploadFile:header:\", this.header);\n\n        uni.showLoading({\n          mask: true,\n          title: \"图片上传中...\"\n        });\n\n        const task = uni.uploadFile({\n          url: this.action,\n          filePath: this.lists[index].url,\n          name: this.name,\n          formData: this.formData,\n          header: this.header,\n          success: res => {\n\n            uni.hideLoading();\n\n            // 判断是否json字符串，将其转为json格式\n            let data = this.toJson && this.$u.test.jsonString(res.data) ? JSON.parse(res\n              .data) : res.data;\n\n            if (![200, 201, 204].includes(res.statusCode)) {\n              this.uploadError(index, data);\n            } else if (data.code === 503) {\n              // this.showToast(data.message);\n              uni.showToast({\n                icon: 'error',\n                title: data.message,\n                duration: 3000\n              });\n              this.uploadError(index, data);\n            } else {\n              // 上传成功\n              this.lists[index].response = data;\n              this.lists[index].progress = 100;\n              this.lists[index].error = false;\n              this.$emit('on-success', data, index, this.lists, this.index);\n            }\n          },\n          fail: e => {\n            uni.hideLoading();\n\n            this.uploadError(index, e);\n          },\n          complete: res => {\n            this.uploading = false;\n            this.uploadFile(index + 1);\n            this.$emit('on-change', res, index, this.lists, this.index);\n          }\n        });\n        task.onProgressUpdate(res => {\n          if (res.progress > 0) {\n            this.lists[index].progress = res.progress;\n            this.$emit('on-progress', res, index, this.lists, this.index);\n          }\n        });\n      },\n      // 上传失败\n      uploadError(index, err) {\n        if (err.code === 503) {\n          this.lists.splice(index, 1)\n        } else {\n          this.showToast('上传失败，请重试');\n          this.lists[index].progress = 0;\n          this.lists[index].error = true;\n          this.lists[index].response = null;\n          this.$emit('on-error', err, index, this.lists, this.index);\n        }\n      },\n      // 删除一个图片\n      deleteItem(index) {\n        uni.showModal({\n          title: '提示',\n          content: '您确定要删除此项吗？',\n          success: async (res) => {\n            if (res.confirm) {\n              // 先检查是否有定义before-remove移除前钩子\n              // 执行before-remove钩子\n              if (this.beforeRemove && typeof(this.beforeRemove) === 'function') {\n                // 此处钩子执行 原理同before-remove参数，见上方注释\n                let beforeResponse = this.beforeRemove.bind(this.$u.$parent.call(this))(index,\n                  this.lists);\n                // 判断是否返回了promise\n                if (!!beforeResponse && typeof beforeResponse.then === 'function') {\n                  await beforeResponse.then(res => {\n                    // promise返回成功，不进行动作，继续上传\n                    this.handlerDeleteItem(index);\n                  }).catch(err => {\n                    // 如果进入promise的reject，终止删除操作\n                    this.showToast('已终止移除');\n                  })\n                } else if (beforeResponse === false) {\n                  // 返回false，终止删除\n                  this.showToast('已终止移除');\n                } else {\n                  // 如果返回true，执行删除操作\n                  this.handlerDeleteItem(index);\n                }\n              } else {\n                // 如果不存在before-remove钩子，\n                this.handlerDeleteItem(index);\n              }\n            }\n          }\n        });\n      },\n      // 执行移除图片的动作，上方代码只是判断是否可以移除\n      handlerDeleteItem(index) {\n        // 如果文件正在上传中，终止上传任务，进度在0 < progress < 100则意味着正在上传\n        if (this.lists[index].process < 100 && this.lists[index].process > 0) {\n          typeof this.lists[index].uploadTask != 'undefined' && this.lists[index].uploadTask.abort();\n        }\n        this.lists.splice(index, 1);\n        this.$forceUpdate();\n        this.$emit('on-remove', index, this.lists, this.index);\n        this.showToast('移除成功');\n      },\n      // 用户通过ref手动的形式，移除一张图片\n      remove(index) {\n        // 判断索引的合法范围\n        if (index >= 0 && index < this.lists.length) {\n          this.lists.splice(index, 1);\n          this.$emit('on-list-change', this.lists, this.index);\n        }\n      },\n      // 预览图片\n      doPreviewImage(url, index) {\n        if (!this.previewFullImage) return;\n        const images = this.lists.map(item => item.url || item.path);\n        uni.previewImage({\n          urls: images,\n          current: url,\n          success: () => {\n            this.$emit('on-preview', url, this.lists, this.index);\n          },\n          fail: () => {\n            uni.showToast({\n              title: '预览图片失败',\n              icon: 'none'\n            });\n          }\n        });\n      },\n      // 判断文件后缀是否允许\n      checkFileExt(file) {\n        // 检查是否在允许的后缀中\n        let noArrowExt = false;\n        // 获取后缀名\n        let fileExt = '';\n        const reg = /.+\\./;\n        // 如果是H5，需要从name中判断\n        // #ifdef H5\n        fileExt = file.name.replace(reg, \"\").toLowerCase();\n        // #endif\n        // 非H5，需要从path中读取后缀\n        // #ifndef H5\n        fileExt = file.path.replace(reg, \"\").toLowerCase();\n        // #endif\n        // 使用数组的some方法，只要符合limitType中的一个，就返回true\n        noArrowExt = this.limitType.some(ext => {\n          // 转为小写\n          return ext.toLowerCase() === fileExt;\n        });\n        if (!noArrowExt) this.showToast(`不允许选择${fileExt}格式的文件`);\n        return noArrowExt;\n      }\n    }\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  @import '../../libs/css/style.components.scss';\n\n  .u-upload {\n    @include vue-flex;\n    flex-wrap: wrap;\n    align-items: center;\n  }\n\n  .u-list-item {\n    width: 200rpx;\n    height: 200rpx;\n    // overflow: hidden;\n    margin: 10rpx;\n    background: rgb(244, 245, 246);\n    position: relative;\n    border-radius: 10rpx;\n    /* #ifndef APP-NVUE */\n    display: flex;\n    /* #endif */\n    align-items: center;\n    justify-content: center;\n  }\n\n  .u-preview-wrap {\n    border: 1px solid rgb(235, 236, 238);\n  }\n\n  .u-add-wrap {\n    flex-direction: column;\n    color: $u-content-color;\n    font-size: 26rpx;\n  }\n\n  .u-add-tips {\n    margin-top: 20rpx;\n    line-height: 40rpx;\n  }\n\n  .u-add-wrap__hover {\n    background-color: rgb(235, 236, 238);\n  }\n\n  .u-preview-image {\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 10rpx;\n  }\n\n  .u-delete-icon {\n    position: absolute;\n    top: -10rpx;\n    right: -10rpx;\n    z-index: 10;\n    background-color: $u-type-error;\n    border-radius: 100rpx;\n    width: 32rpx;\n    height: 32rpx;\n    @include vue-flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .u-icon {\n    @include vue-flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .u-progress {\n    position: absolute;\n    bottom: 2rpx;\n    left: 8rpx;\n    right: 8rpx;\n    z-index: 9;\n    width: auto;\n  }\n\n  .u-error-btn {\n    color: #ffffff;\n    background-color: $u-type-error;\n    font-size: 20rpx;\n    padding: 4px 0;\n    text-align: center;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 9;\n    line-height: 1;\n  }\n</style>\n","import mod from \"-!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=style&index=0&id=0d33af60&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./u-upload.vue?vue&type=style&index=0&id=0d33af60&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1672629018617\n      var cssReload = require(\"C:/develop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}